‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö
‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ (Approval System) ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏∑‡∏≠‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà "‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á" ‡πÅ‡∏•‡∏∞ "‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô" ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ "Hybrid (State + Log)" ‡∏Ñ‡∏£‡∏±‡∏ö
‡∏°‡∏±‡∏ô‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ 3 ‡∏≠‡∏¢‡πà‡∏≤‡∏á:
	1. Frontend (‡∏Ñ‡∏≠‡∏°‡πÇ‡∏û‡πÄ‡∏ô‡∏ô‡∏ï‡πå) ‡∏à‡∏∞ "‡∏ß‡∏≤‡∏î" Flow ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?
	2. Backend (‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤) ‡∏à‡∏∞‡∏£‡∏π‡πâ "Task List" ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?
	3. ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï (‡∏ñ‡πâ‡∏≤‡∏Å‡∏é‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ô Reject) ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡πÑ‡∏´‡∏°?
‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å‡πÜ 4 ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö:

1. üóÑÔ∏è ‡∏ï‡∏≤‡∏£‡∏≤‡∏á "State" (Gen_Approval_Flow)
‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ "‡∏™‡∏°‡∏≠‡∏á" ‡∏´‡∏£‡∏∑‡∏≠ "Task List" ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö (‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÄ‡∏™‡∏ô‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°)
	‚Ä¢ ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ "‡∏´‡πâ‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏á" ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà User ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (Submission) Backend ‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á "‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö‡∏ï‡∏£‡∏≤" (Stamp) ‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
	‚Ä¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: User LV 0 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ submission_id: 123
	‚Ä¢ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô: submission.controller.js (‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÅ‡∏Å‡πâ) ‡∏à‡∏∞ INSERT 3 ‡πÅ‡∏ñ‡∏ß ‡∏•‡∏á‡πÉ‡∏ô Gen_Approval_Flow ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ:
		‚óã (submission_id: 123, sequence: 1, required_level: 1, status: 'Pending')
		‚óã (submission_id: 123, sequence: 2, required_level: 2, status: 'Pending')
		‚óã (submission_id: 123, sequence: 3, required_level: 3, status: 'Pending')
	‚Ä¢ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:
		‚óã Frontend "‡∏ß‡∏≤‡∏î" Flow ‡∏á‡πà‡∏≤‡∏¢: ‡∏Ñ‡∏≠‡∏°‡πÇ‡∏û‡πÄ‡∏ô‡∏ô‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏Ñ‡πà SELECT * FROM Gen_Approval_Flow WHERE submission_id = 123 ‡∏Å‡πá‡πÑ‡∏î‡πâ 3 ‡πÅ‡∏ñ‡∏ß‡∏ô‡∏µ‡πâ‡πÑ‡∏õ .map() ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
		‚óã "Task List" Query ‡∏á‡πà‡∏≤‡∏¢: ‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤ LV 2 ‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á? Query ‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å: SELECT * ... WHERE required_level = 2 AND status = 'Pending'
		‚óã "‡∏Å‡∏±‡∏ô‡∏Å‡∏é‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô" (Robust): ‡∏ñ‡πâ‡∏≤‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏é (‡πÄ‡∏ä‡πà‡∏ô LV 0 ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 2 ‡∏Ñ‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥) ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏Å‡πà‡∏≤ 123 ‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ "‡∏ï‡∏£‡∏≤‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö" 3 ‡πÅ‡∏ñ‡∏ß‡∏Ç‡∏≠‡∏á‡∏°‡∏±‡∏ô ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÅ‡∏£‡∏Å

2. üìñ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á "Log" (Gen_Approved_log)
‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ "‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥" ‡∏´‡∏£‡∏∑‡∏≠ "Audit Log" ‡∏Ñ‡∏£‡∏±‡∏ö (‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÑ‡∏ß‡πâ)
	‚Ä¢ ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞ "‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤" ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡∏ñ‡∏π‡∏Å INSERT ‡∏Å‡πá‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ "‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥" (Action) ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
	‚Ä¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏´‡∏±‡∏ß‡∏´‡∏ô‡πâ‡∏≤ LV 1 ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏Å‡∏î "Approve" ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ 123
	‚Ä¢ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô: API (‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡πà‡∏≠) ‡∏à‡∏∞‡∏ó‡∏≥ 2 ‡∏≠‡∏¢‡πà‡∏≤‡∏á:
		1. UPDATE ‡∏ï‡∏≤‡∏£‡∏≤‡∏á "State": ‡πÅ‡∏ñ‡∏ß sequence: 1 -> status: 'Approved'
		2. INSERT ‡∏ï‡∏≤‡∏£‡∏≤‡∏á "Log": (submission_id: 123, User_approver_id: 'lv1_user', action: 'Approved', ...)
	‚Ä¢ ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ: ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö (Auditing) ‡∏ß‡πà‡∏≤‡πÉ‡∏Ñ‡∏£, ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£, ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà

3. ‚öôÔ∏è ‡∏Å‡∏≤‡∏£ "‡∏™‡∏£‡πâ‡∏≤‡∏á" Flow (‡πÉ‡∏ô Submission Controller)
‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ "‡∏ú‡πà‡∏≤‡∏ï‡∏±‡∏î" submission.controller.js ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏â‡∏•‡∏≤‡∏î‡∏Ç‡∏∂‡πâ‡∏ô:
	‚Ä¢ ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Flow ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥ ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£
	‚Ä¢ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô: ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å await transaction.commit(); (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à) ‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏™‡∏±‡πà‡∏á await createApprovalFlow(pool, submissionId, submittedBy);
	‚Ä¢ createApprovalFlow: ‡∏Ñ‡∏∑‡∏≠‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà SELECT LV_Approvals ‡∏Ç‡∏≠‡∏á User ‡πÅ‡∏•‡πâ‡∏ß if/else ‡∏ï‡∏≤‡∏°‡∏Å‡∏é (LV 0 -> 3 steps, LV 1 -> 2 steps, ...) ‡πÄ‡∏û‡∏∑‡πà‡∏≠ INSERT ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á "State" (‡∏Ç‡πâ‡∏≠ 1)

4. üö™ "‡∏õ‡∏£‡∏∞‡∏ï‡∏π" API (Approval Controller)
‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ ‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á approval.controller.js (‡πÅ‡∏•‡∏∞ approval.routes.js) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡πÉ‡∏´‡πâ Frontend ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:
	‚Ä¢ GET /api/approvals/flow/:submissionId:
		‚óã ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ API "‡∏≠‡πà‡∏≤‡∏ô" ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ó‡∏≥‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
		‚óã ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà: SELECT ‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á "State" (‡∏Ç‡πâ‡∏≠ 1) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Frontend ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ "‡∏ß‡∏≤‡∏î" Flow
	‚Ä¢ POST /api/approvals/action:
		‚óã ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ API "‡∏Å‡∏£‡∏∞‡∏ó‡∏≥" (‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡πÑ‡∏°‡πà‡πÄ‡∏™‡∏£‡πá‡∏à)
		‚óã ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà: UPDATE ‡∏ï‡∏≤‡∏£‡∏≤‡∏á "State" (‡∏Ç‡πâ‡∏≠ 1) ‡πÅ‡∏•‡∏∞ INSERT ‡∏ï‡∏≤‡∏£‡∏≤‡∏á "Log" (‡∏Ç‡πâ‡∏≠ 2)

‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î: ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ 2 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á (State + Log) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö "‡∏à‡∏≥" ‡∏Å‡∏é‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô (State) ‡πÅ‡∏•‡∏∞ "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥ (Log) ‡πÅ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏±‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏£‡πá‡∏ß, ‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á, ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö07-Nov-25 2:13 PM 

